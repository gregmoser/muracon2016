window.Prototype&&(delete Object.prototype.toJSON,delete Array.prototype.toJSON,delete Hash.prototype.toJSON,delete String.prototype.toJSON),this.JSON||(JSON=function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapeable.lastIndex=0,escapeable.test(a)?'"'+a.replace(escapeable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"number"==typeof i.length&&!i.propertyIsEnumerable("length")){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)d=rep[c],"string"==typeof d&&(e=str(d,i,rep),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.hasOwnProperty.call(i,d)&&(e=str(d,i,rep),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapeable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;return{stringify:function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})},parse:function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+(+a.charCodeAt(0)).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}}()),function(a,b){var c=function(b){(a.execScript||function(b){a.eval.call(a,b)})(b)},d=function(a,b){return a instanceof(b||Array)},e=document,f="getElementsByTagName",g="length",h="readyState",i="onreadystatechange",j=e[f]("script"),k=j[j[g]-1],l=k.innerHTML.replace(/^\s+|\s+$/g,"");if(!a.ljs){var m=k.src.match(/checkLoaded/)?1:0,n=e[f]("head")[0]||e.documentElement,o=function(a){var b={};return b.u=a.replace(/#(=)?([^#]*)?/g,function(a,c,d){return b[c?"f":"i"]=d,""}),b},p=function(a,b,c){var d,f=e.createElement(a);c&&(f[h]?f[i]=function(){("loaded"===f[h]||"complete"===f[h])&&(f[i]=null,c())}:f.onload=c);for(d in b)b[d]&&(f[d]=b[d]);n.appendChild(f)},q=function(a,b){if(this.aliases&&this.aliases[a]){var c=this.aliases[a].slice(0);return d(c)||(c=[c]),b&&c.push(b),this.load.apply(this,c)}if(d(a)){for(var e=a[g];e--;)this.load(a[e]);return b&&a.push(b),this.load.apply(this,a)}return a.match(/\.css\b/)?this.loadcss(a,b):this.loadjs(a,b)},r={},s={aliases:{},loadjs:function(a,c,d){if("object"==typeof a){if(Array.isArray(a))return s.load.apply(this,arguments);if("function"==typeof c)d=c,c={},a=c.href;else{if("string"==typeof c||"object"==typeof c&&Array.isArray(c))return s.load.apply(this,arguments);c=a,a=c.href,d=b}}else if("function"==typeof c)d=c,c={};else if("string"==typeof c||"object"==typeof c&&Array.isArray(c))return s.load.apply(this,arguments);"undefined"==typeof c&&(c={});for(var e=o(a),f=[["i","id"],["f","fallback"],["u","src"]],g=0;g<f.length;g++){var h=f[g];!(h[1]in c)&&h[0]in e&&(c[h[1]]=e[h[0]])}"undefined"==typeof c.type&&(c.type="text/javascript");var i={};for(var j in c)"fallback"!=j&&(i[j]=c[j]);return i.onerror=function(a){if(c.fallback){var b=a.currentTarget;b.parentNode.removeChild(b),i.src=c.fallback,p("script",c,d)}},r[i.src]===!0?(d&&d(),this):r[i.src]!==b?(d&&(r[i.src]=function(a,b){return function(){a&&a(),b&&b()}}(r[i.src],d)),this):(r[i.src]=function(a){return function(){r[i.src]=!0,a&&a()}}(d),d=function(){r[a]()},p("script",i,d),this)},loadcss:function(a,c,d){if("object"==typeof a){if(Array.isArray(a))return s.load.apply(this,arguments);if("function"==typeof c)d=c,c=a,a=c.href;else{if("string"==typeof c||"object"==typeof c&&Array.isArray(c))return s.load.apply(this,arguments);c=a,a=c.href,d=b}}else if("function"==typeof c)d=c,c={};else if("string"==typeof c||"object"==typeof c&&Array.isArray(c))return s.load.apply(this,arguments);var e=o(a);if(e={type:"text/css",rel:"stylesheet",href:a,id:e.i},"undefined"!=typeof c)for(var f in c)e[f]=c[f];return r[e.href]||p("link",e),r[e.href]=!0,d&&d(),this},load:function(){var a=arguments,c=a[g];return 1===c&&d(a[0],Function)?(a[0](),this):(q.call(this,a[0],1>=c?b:function(){s.load.apply(s,[].slice.call(a,1))}),this)},addAliases:function(a){for(var b in a)this.aliases[b]=d(a[b])?a[b].slice(0):a[b];return this}};if(m){var t,u,v,w;for(t=0,u=j[g];u>t;t++)(w=j[t].getAttribute("src"))&&(r[w.replace(/#.*$/,"")]=!0);for(v=e[f]("link"),t=0,u=v[g];u>t;t++)("stylesheet"===v[t].rel||"text/css"===v[t].type)&&(r[v[t].getAttribute("href").replace(/#.*$/,"")]=!0)}a.ljs=s}l&&c(l)}(window),function(a){a.fn.serializeObject=function(){var b=this,c={},d={},e={validate:/^[a-zA-Z][a-zA-Z0-9_]*(?:\[(?:\d*|[a-zA-Z0-9_]+)\])*$/,key:/[a-zA-Z0-9_]+|(?=\[\])/g,push:/^$/,fixed:/^\d+$/,named:/^[a-zA-Z0-9_]+$/};return this.build=function(a,b,c){return a[b]=c,a},this.push_counter=function(a){return void 0===d[a]&&(d[a]=0),d[a]++},a.each(a(this).serializeArray(),function(){if(e.validate.test(this.name)){for(var d,f=this.name.match(e.key),g=this.value,h=this.name;void 0!==(d=f.pop());)h=h.replace(new RegExp("\\["+d+"\\]$"),""),d.match(e.push)?g=b.build([],b.push_counter(h),g):d.match(e.fixed)?g=b.build([],d,g):d.match(e.named)&&(g=b.build({},d,g));c=a.extend(!0,c,g)}}),c}}(jQuery),$.fn.changeElementType=function(a){var b={};$.each(this[0].attributes,function(a,c){b[c.nodeName]=c.value});var c=$("<"+a+"/>",b).append($(this).contents());return this.replaceWith(c),c},Object.keys||(Object.keys=function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}());var initMura=function(config){!window.jQuery&&document.write(unescape('%3Cscript type="text/javascript" src="'+config.assetpath+'/jquery/jquery.js"%3E%3C/script%3E')),config.context||(config.context=""),config.assetpath||(config.assetpath=config.context),config.apiEndpoint||(config.apiEndpoint=config.context+"/index.cfm/_api/json/v1/"),config.requirementspath||(config.requirementspath=config.context+"/requirements"),"undefined"==typeof config.adminpreview&&(config.adminpreview=!1),"undefined"==typeof config.mobileformat&&(config.mobileformat=!1),"undefined"!=typeof config.windowdocumentdomain&&""!=config.windowdocumentdomain&&(window.document.domain=config.windowdocumentdomain);var createCookie=function(a,b,c){if(c){var d=new Date;d.setTime(d.getTime()+24*c*60*60*1e3);var e="; expires="+d.toGMTString()}else var e="";document.cookie=a+"="+b+e+"; path=/"},readCookie=function(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b))return unescape(e.substring(b.length,e.length))}return""},eraseCookie=function(a){createCookie(a,"",-1)},addLoadEvent=function(a){var b=window.onload;"function"!=typeof window.onload?window.onload=a:window.onload=function(){b(),a()}},noSpam=function(a,b){locationstring="mailto:"+a+"@"+b,window.location=locationstring},$escape=function(a){return escape(a).replace(new RegExp("\\+","g"),"%2B")},setHTMLEditor=function(a){var b=function(){var b=CKEDITOR.instances[$(a).attr("id")],e={height:200,width:"70%"};$(a).data("editorconfig")&&$.extend(e,$(a).data("editorconfig")),b&&(b.destroy(),CKEDITOR.remove(b)),$("#"+$(a).attr("id")).ckeditor(d(e),c)},c=function(a){var b=jQuery(a).ckeditorGet();b.resetDirty();CKEDITOR.instances},d=function(a){var b={toolbar:"htmlEditor",customConfig:"config.js.cfm"};return"object"==typeof a&&$.extend(b,a),b};loader().loadjs(config.requirementspath+"/ckeditor/ckeditor.js",config.requirementspath+"/ckeditor/adapters/jquery.js",function(){b()})},pressed_keys="",loginCheck=function(a){if(27==a?pressed_keys=a.toString():76==a&&(pressed_keys=pressed_keys+""+a.toString()),27!=a&&76!=a&&(pressed_keys=""),""!=pressed_keys){var b=pressed_keys;-1!=b.indexOf("2776")&&-1==location.search.indexOf("display=login")&&("undefined"!=typeof config.loginURL?lu=config.loginURL:"undefined"!=typeof config.loginurl?lu=config.loginurl:lu="?display=login","undefined"!=typeof config.returnURL?ru=config.returnURL:"undefined"!=typeof config.returnurl?ru=config.returnURL:ru=location.href,pressed_keys="",lu=new String(lu),-1!=lu.indexOf("?")?location.href=lu+"&returnUrl="+$escape(ru):location.href=lu+"?returnUrl="+$escape(ru))}},isInteger=function(a){var b;for(b=0;b<a.length;b++){var c=a.charAt(b);if("0">c||c>"9")return!1}return!0},createDate=function(a){var b=a.split("/"),c=b[0],d=b[1],e=b[2],f=new Date(e,c-1,d);return isNaN(f.getMonth())?new Date:f},dateToString=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getFullYear();return 10>b&&(b="0"+b),10>c&&(c="0"+c),b+"/"+c+"/20"+new String(d).substring(2,4)},stripCharsInBag=function(a,b){var c,d="";for(c=0;c<a.length;c++){var e=a.charAt(c);-1==b.indexOf(e)&&(d+=e)}return d},daysInFebruary=function(a){return a%4!=0||a%100==0&&a%400!=0?28:29},DaysArray=function(a){for(var b=1;a>=b;b++)this[b]=31,(4==b||6==b||9==b||11==b)&&(this[b]=30),2==b&&(this[b]=29);return this},isDate=function(a,b){var c=DaysArray(12),d=a.split(config.dtCh);if(3!=d.length)return!1;var e=d[config.dtFormat[0]],f=d[config.dtFormat[1]],g=d[config.dtFormat[2]];strYr=g,"0"==f.charAt(0)&&f.length>1&&(f=f.substring(1)),"0"==e.charAt(0)&&e.length>1&&(e=e.substring(1));for(var h=1;3>=h;h++)"0"==strYr.charAt(0)&&strYr.length>1&&(strYr=strYr.substring(1));return month=parseInt(e),day=parseInt(f),year=parseInt(strYr),month<1||month>12?!1:day<1||day>31||2==month&&day>daysInFebruary(year)||day>c[month]?!1:4!=g.length||0==year||year<config.minYear||year>config.maxYear?!1:0==isInteger(stripCharsInBag(a,config.dtCh))?!1:!0},isEmail=function(a){var b=a;return-1==b.indexOf("@")||-1==b.indexOf(".")?!1:!0},initShadowBox=function(a){$(a).find('[data-rel^="shadowbox"],[rel^="shadowbox"]').length&&loader().load([mura.assetpath+"/css/shadowbox.min.css",mura.assetpath+"/js/external/shadowbox/shadowbox.min.js",mura.assetpath+"/js/external/shadowbox/shadowbox-jquery.min.js"],function(){window.Shadowbox.init()})},validateForm=function(frm,customaction){for(var getValidationFieldName=function(a){return void 0!=a.getAttribute("data-label")?a.getAttribute("data-label"):void 0!=a.getAttribute("label")?a.getAttribute("label"):a.getAttribute("name")},getValidationIsRequired=function(a){return void 0!=a.getAttribute("data-required")?"true"==a.getAttribute("data-required").toLowerCase():void 0!=a.getAttribute("required")?"true"==a.getAttribute("required").toLowerCase():!1},getValidationMessage=function(a,b){return void 0!=a.getAttribute("data-message")?a.getAttribute("data-message"):void 0!=a.getAttribute("message")?a.getAttribute("message"):getValidationFieldName(a).toUpperCase()+b},getValidationType=function(a){return void 0!=a.getAttribute("data-validate")?a.getAttribute("data-validate").toUpperCase():void 0!=a.getAttribute("validate")?a.getAttribute("validate").toUpperCase():""},hasValidationMatchField=function(a){return void 0!=a.getAttribute("data-matchfield")&&""!=a.getAttribute("data-matchfield")?!0:void 0!=a.getAttribute("matchfield")&&""!=a.getAttribute("matchfield")?!0:!1},getValidationMatchField=function(a){return void 0!=a.getAttribute("data-matchfield")?a.getAttribute("data-matchfield"):void 0!=a.getAttribute("matchfield")?a.getAttribute("matchfield"):""},hasValidationRegex=function(a){return void 0==a.value?!1:void 0!=a.getAttribute("data-regex")&&""!=a.getAttribute("data-regex")?!0:void 0!=a.getAttribute("regex")&&""!=a.getAttribute("regex")?!0:void 0},getValidationRegex=function(a){return void 0!=a.getAttribute("data-regex")?a.getAttribute("data-regex"):void 0!=a.getAttribute("regex")?a.getAttribute("regex"):""},theForm=frm,errors="",setFocus=0,started=!1,startAt,firstErrorNode,validationType="",validations={properties:{}},frmInputs=theForm.getElementsByTagName("input"),rules=new Array,data={},$customaction=customaction,f=0;f<frmInputs.length;f++){var theField=frmInputs[f];validationType=getValidationType(theField).toUpperCase(),rules=new Array,""==theField.style.display&&(getValidationIsRequired(theField)&&rules.push({required:!0,message:getValidationMessage(theField," is required.")}),""!=validationType&&("EMAIL"==validationType&&""!=theField.value?rules.push({dataType:"EMAIL",message:getValidationMessage(theField," must be a valid email address.")}):"NUMERIC"==validationType&&""!=theField.value?rules.push({dataType:"NUMERIC",message:getValidationMessage(theField," must be numeric.")}):"REGEX"==validationType&&""!=theField.value&&hasValidationRegex(theField)?rules.push({regex:getValidationRegex(theField),message:getValidationMessage(theField," is not valid.")}):"MATCH"==validationType&&hasValidationMatchField(theField)&&theField.value!=theForm[getValidationMatchField(theField)].value?rules.push({eq:theForm[getValidationMatchField(theField)].value,message:getValidationMessage(theField," must match"+getValidationMatchField(theField)+".")}):"DATE"==validationType&&""!=theField.value&&rules.push({dataType:"DATE",message:getValidationMessage(theField," must be a valid date [MM/DD/YYYY].")})),rules.length&&(validations.properties[theField.getAttribute("name")]=rules,data[theField.getAttribute("name")]=theField.value))}var frmTextareas=theForm.getElementsByTagName("textarea");for(f=0;f<frmTextareas.length;f++)theField=frmTextareas[f],validationType=getValidationType(theField),rules=new Array,""==theField.style.display&&getValidationIsRequired(theField)?rules.push({required:!0,message:getValidationMessage(theField," is required.")}):""!=validationType&&"REGEX"==validationType&&""!=theField.value&&hasValidationRegex(theField)&&rules.push({regex:getValidationRegex(theField),message:getValidationMessage(theField," is not valid.")}),rules.length&&(validations.properties[theField.getAttribute("name")]=rules,data[theField.getAttribute("name")]=theField.value);var frmSelects=theForm.getElementsByTagName("select");for(f=0;f<frmSelects.length;f++)theField=frmSelects[f],validationType=getValidationType(theField),rules=new Array,""==theField.style.display&&getValidationIsRequired(theField)&&rules.push({required:!0,message:getValidationMessage(theField," is required.")}),rules.length&&(validations.properties[theField.getAttribute("name")]=rules,data[theField.getAttribute("name")]=theField.value);try{jQuery.ajax({type:"post",url:config.apiEndpoint+"?method=validate",dataType:"text",data:{data:$escape(JSON.stringify(data)),validations:$escape(JSON.stringify(validations)),version:4},success:function(resp){var _data=eval("("+resp+")");if(data=_data.data,jQuery.isEmptyObject(data)){if("function"==typeof $customaction)return $customaction(theForm),!1;document.createElement("form").submit.call(theForm)}else{var msg="";for(var e in data)msg=msg+data[e]+"\n";alert(msg)}},error:function(a){alert(JSON.stringify(a))}})}catch(err){console.log(err)}return!1},setLowerCaseKeys=function(a){return $.map(a,function(b,c){c!==c.toLowerCase()&&(a[c.toLowerCase()]=a[c],delete a[c]),"object"==typeof a[c.toLowerCase()]&&setLowerCaseKeys(a[c.toLowerCase()])}),a},loader=function(){return window.ljs},processHandlers=function(a){for(var b=[function(){$(a).find(".mura-async-object").each(function(){processAsyncObject(this)})},function(){$(a).find(".htmlEditor").each(function(){setHTMLEditor(this)})},function(){($(a).find(".cffp_applied").length||$(a).find(".cffp_mm").length||$(a).find(".cffp_kp").length)&&$.getScript(config.requirementspath+"/cfformprotect/js/cffp.js")},function(){$(a).find(".g-recaptcha").length&&$.getScript("https://www.google.com/recaptcha/api.js?onload=checkForReCaptcha&render=explicit"),$(a).find(".g-recaptcha-container").length&&loader().loadjs("https://www.google.com/recaptcha/api.js?onload=checkForReCaptcha&render=explicit",function(){$(a).find(".g-recaptcha-container").each(function(){var a=this,b=function(){"object"==typeof grecaptcha?grecaptcha.render($(a).attr("id"),{sitekey:$(a).data("sitekey"),theme:$(a).data("theme"),type:$(a).data("type")}):window.setTimeout(function(){b()},10)};b()})})},function(){"function"==typeof resizeEditableObject&&($(a).closest(".editableObject").each(function(){resizeEditableObject(this)}),$(a).find(".frontEndToolsModal").each(function(){jQuery(this).click(function(a){a.preventDefault(),openFrontEndToolsModal(this)})}),$(a).find(".editableObject").each(function(){resizeEditableObject(this)}))},function(){initShadowBox(a)},function(){"undefined"!=typeof urlparams.muraadminpreview&&$(a).find("a").attr("href",function(a,b){return"string"==typeof b&&-1==b.indexOf("muraadminpreview")?b+(-1!=b.indexOf("?")?"&muraadminpreview&mobileformat="+config.mobileformat:"?muraadminpreview&muraadminpreview&mobileformat="+config.mobileformat):b})}],c=0;c<b.length;c++)b[c]()},registeredHandlers={},getRegisteredHandlers=function(a){return"undefined"==typeof registeredHandlers[a]&&(registeredHandlers[a]=[]),registeredHandlers[a]},addEventHandler=function(a,b){if("object"==typeof a)for(var c in a)getRegisteredHandlers(c).push(a[c]);else getRegisteredHandlers(a).push(b)},announceEvent=function(a,b){var c=getRegisteredHandlers(a);for(var d in c)c[d].apply(b)},submitForm=function(a,b){if(a="function"==typeof a.get?a.get(0):a,b=b?"function"==typeof b.get?b:$(b):$(a).closest(".mura-async-object"),b.length||a.submit(),"undefined"!=typeof FormData&&"multipart/form-data"==$(a).attr("enctype")){var c=new FormData(a),d=setLowerCaseKeys($(a).serializeObject()),e=$.extend(!0,setLowerCaseKeys(b.data()),urlparams,{siteid:config.siteid,contentid:config.contentid,contenthistid:config.contenthistid,nocache:1});for(var f in e)f in d||c.append(f,e[f]);"objectparams"in d&&c.append("objectparams2",$escape(JSON.stringify(b.data("objectparams")))),"nocache"in d&&c.append("nocache",1);var g={url:config.apiEndpoint+"?method=processAsyncObject",type:"POST",data:c,processData:!1,contentType:!1,dataType:"JSON",success:function(a){handleResponse(b,a)}}}else{var c=$.extend(!0,setLowerCaseKeys(b.data()),urlparams,setLowerCaseKeys($(a).serializeObject()),{siteid:config.siteid,contentid:config.contentid,contenthistid:config.contenthistid,nocache:1});"g-recaptcha-response"in c||!$("#g-recaptcha-response").length||(c["g-recaptcha-response"]=$("#g-recaptcha-response").val()),"objectparams"in c&&(c.objectparams=$escape(JSON.stringify(c.objectparams)));var g={url:config.apiEndpoint+"?method=processAsyncObject",type:"POST",data:c,dataType:"JSON",success:function(a){handleResponse(b,a)}}}var h=b.get(0);h.prevInnerHTML=h.innerHTML,h.prevData=b.data(),h.innerHTML=window.mura.preloaderMarkup,$.ajax(g)},wireUpObject=function(a,b){var c=function(b){return validateForm(b,function(b){submitForm(b,a)}),!1};a="function"==typeof a.get?a:$(a);var d=a.get(0);$(d).html(b),$(d).find('a[href="javascript:history.back();"]').each(function(){$(this).off("click").on("click",function(a){if(d.prevInnerHTML){if(a.preventDefault(),wireUpObject(d.prevInnerHTML),d.prevData)for(var b in d.prevData)$('[name="'+b+'"]').val(d.prevData[b]);d.prevInnerHTML=!1,d.prevData=!1}})}),processHandlers(d),$(d).find("form").each(function(){$(this).removeAttr("onsubmit"),$(this).on("submit",function(){return c(document.getElementById($(this).attr("id")))})}),announceEvent("asyncObjectRendered",d),$(d).trigger("asyncObjectRendered")},handleResponse=function(a,b){a="function"==typeof a.get?a:$(a),"html"in b.data?wireUpObject(a,b.data.html):"redirect"in b.data?location.href=b.data.redirect:"render"in b.data&&$.ajax({type:"POST",xhrFields:{withCredentials:!0},crossDomain:!0,url:b.data.render,data:b.data,success:function(b){"string"==typeof b?wireUpObject(a,b):"object"==typeof b&&"html"in b&&wireUpObject(a,b.html)}})},processAsyncObject=function(a){var b=a,c=$.extend(!0,$(b).data(),urlparams,{siteid:config.siteid,contentid:config.contentid,contenthistid:config.contenthistid});"objectparams"in c&&(c.objectparams=$escape(JSON.stringify(c.objectparams))),$(b).html(config.preloaderMarkup),$.ajax({url:config.apiEndpoint+"?method=processAsyncObject",type:"GET",data:c,dataType:"JSON"}).then(function(b){handleResponse($(a),b)})};$.extend(config,{submitForm:submitForm,processAsyncObject:processAsyncObject,setLowerCaseKeys:setLowerCaseKeys,noSpam:noSpam,addLoadEvent:addLoadEvent,loader:loader,announceEvent:announceEvent,addEventHandler:addEventHandler,createCookie:createCookie,readCookie:readCookie}),config.validateForm=validateForm,$.extend(window,{mura:config,validateForm:validateForm,setHTMLEditor:setHTMLEditor,createCookie:createCookie,readCookie:readCookie,addLoadEvent:addLoadEvent,noSpam:noSpam});var urlparams={},getQueryStringParams=function(a){var b,c={},d=/\+/g,e=/([^&;=]+)=?([^&;]*)/g,f=function(a){return decodeURIComponent(a.replace(d," "))};if("?"==a.substring(0,1))var g=a.substring(1);else var g=a;for(;b=e.exec(g);)c[f(b[1]).toLowerCase()]=f(b[2]);return c},getURLParams=function(){return getQueryStringParams(window.location.search)};return $(function(){urlparams=setLowerCaseKeys(getURLParams()),processHandlers(document),$(document).on("keydown",function(a){loginCheck(a.which)}),$.fn.appendMuraObject=function(a){var b=$('<div class="mura-async-object"></div>');for(var c in args)$.data(b,c,args[c]);return $(this).append(b),processAsyncObject(this),b},$.fn.prependMuraObject=function(a){var b=$('<div class="mura-async-object"></div>');for(var c in args)$.data(b,c,args[c]);return $(this).prepend(b),processAsyncObject(this),b},$(document).trigger("muraReady")}),config};