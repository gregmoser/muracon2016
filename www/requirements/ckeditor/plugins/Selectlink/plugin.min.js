var iframeWindow=null;CKEDITOR.plugins.add("Selectlink",{init:function(e){e.ui.addButton("Selectlink",{label:"Add Internal Link",command:"Selectlink",icon:this.path+"btn_selectlink.png"});var t=e.addCommand("Selectlink",new CKEDITOR.dialogCommand("Selectlink"));t.canUndo=!1;var n=this;CKEDITOR.dialog.add("Selectlink",function(){return{title:"Select Link",minWidth:550,minHeight:500,resizable:CKEDITOR.DIALOG_RESIZE_BOTH,contents:[{id:"iframe",label:"Insert Internal Link...",expand:!0,elements:[{type:"iframe",src:n.path+"fck_selectlink.cfm",width:"100%",height:"380px",onContentLoad:function(){var e=document.getElementById(this._.frameId);iframeWindow=e.contentWindow}}]}],onOk:function(){if(typeof iframeWindow.document.forms.frmLinks.theLinks!="undefined"){var e=-1,t;if(iframeWindow.document.forms.frmLinks.theLinks.length==undefined){e=0;t=iframeWindow.document.forms.frmLinks.theLinks.value.split("^")}else for(counter=0;counter<iframeWindow.document.forms.frmLinks.theLinks.length;counter++)if(iframeWindow.document.forms.frmLinks.theLinks[counter].checked){e=counter;t=iframeWindow.document.forms.frmLinks.theLinks[e].value.split("^")}if(e!=-1){var n=this._.editor,r=n.getSelection(),i=r.getRanges(!0);if(i.length==1&&i[0].collapsed){var s=new CKEDITOR.dom.text(t[1],n.document);i[0].insertNode(s);i[0].selectNodeContents(s)}r.selectRanges(i);var o=new CKEDITOR.style({element:"a",attributes:{href:t[0]}});o.type=CKEDITOR.STYLE_INLINE;o.apply(n.document)}}}}})},requires:["iframedialog"]});
