var userManager={submitDialogs:[],submitActions:[],addSubmitDialog:function(e){userManager.submitDialogs.push(e)},addSubmitAction:function(e){userManager.submitActions.push(e)},submitForm:function(e,t){function n(){var t;for(t in CKEDITOR.instances)CKEDITOR.instances[t].updateElement();for(t=0;t<s.length;t++)if(t==i){var a=s[t];if("confirmation"==a.type.toLowerCase()){if("function"!=typeof a.condition)return confirmDialog($.extend(a,{yesAction:function(){i++,n()}})),!1;if(a.condition(a))return confirmDialog($.extend(a,{yesAction:function(){i++,n()}})),!1;i++}else if("alert"==a.type.toLowerCase()){if("function"!=typeof a.condition)return alertDialog($.extend(a,{okAction:function(){i++,n()}})),!1;if(a.condition(a))return alertDialog($.extend(a,{okAction:function(){i++,n()}})),!1;i++}else if("validation"==a.type.toLowerCase())if("function"==typeof a.condition){if(a.condition(a))return alertDialog($.extend(a,{okAction:function(){i++}})),!1;i++}else i++;else i++}if(i==s.length){for(var t=0;t<o.length;t++)o[t]();actionModal(function(){e.submit()})}}var i=0,a=!1,s=userManager.submitDialogs,o=userManager.submitActions;return t&&(e.action.value=t),validateForm(e)&&n(),!1},loadExtendedAttributes:function(e,t,n,i,a,s){var o="index.cfm",r="muraAction=cUsers.loadExtendedAttributes&baseID="+e+"&type="+t+"&subType="+n+"&siteID="+i+"&cacheid="+Math.random();siteID=i,context=a,themeAssetPath=s;var l=$("#extendSetsDefault");return l.length&&(l.html('<div class="load-inline"></div>'),$.ajax({url:o+"?"+r,dataType:"text",success:function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),userManager.setExtendedAttributes(e)}})),!1},setExtendedAttributes:function(data){var r=eval("("+data+")");$("#extendSetsDefault").html(r.extended),$("#extendSetsBasic").html(r.basic),""==r.extended?$("#tabExtendedattributesLI").addClass("hide"):$("#tabExtendedattributesLI").removeClass("hide"),setHTMLEditors(),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .colorpicker"),setFinders(".tab-content .mura-ckfinder"),setToolTips(".tab-content"),setFileSelectors()},checkExtendSetTargeting:function(){var e=$(".extendset"),t=!1,n=!1,i=!0;if(e.length){for(var a=0;a<e.length;a++){var s=e[a];if(void 0!=s.getAttribute("categoryid")&&""!=s.getAttribute("categoryid")){if(!n){var o=document.form1.categoryID;n=!0}for(var r=0;r<o.length;r++){var l=o[r],d=o[r].value,c=s.getAttribute("categoryid");!t&&null!=d&&c.indexOf(d)>-1&&(t=!0,membership=l.checked)}t&&membership?(userManager.setFormElementsDisplay(s,""),s.style.display="",i=!1):(userManager.setFormElementsDisplay(s,"none"),s.style.display="none")}else userManager.setFormElementsDisplay(s,""),s.style.display="",i=!1;t=!1}i?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(e,t,n,i,a,s){this.loadExtendedAttributes(e,t,n,i,a,s)},setFormElementsDisplay:function(e,t){var n=e.getElementsByTagName("input");if(n.length)for(var i=0;i<n.length;i++)n[i].style.display=t;if(n=e.getElementsByTagName("textarea"),n.length)for(var i=0;i<n.length;i++)n[i].style.display=t;if(n=e.getElementsByTagName("select"),n.length)for(var i=0;i<n.length;i++)n[i].style.display=t}};